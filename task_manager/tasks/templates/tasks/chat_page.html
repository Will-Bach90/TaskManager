{% extends "base.html" %}

{% block content %}
<div class="container">
    <div class="row">
        <div id="chat-log">
            {% for message in messages %}
            <div 
            class="msg {% if message.author.id == request.user.id %}message-right{% else %}message-left{% endif %}" 
            data-message-id="{{ message.id }}" 
            data-is-own-message="{% if message.author.id == request.user.id %}true{% else %}false{% endif %}">
                <p style="margin-top: 10pt;">
                    <b style="font-size: 11pt; padding-left: 5px;">{{ message.author.username }} </b>
                    <span id="msg-date" style="padding-right: 5px;">{{ message.timestamp|date:"m/d/Y H:iA" }}</span></br>
                    <button id="message-container" type="button" class="btn message-badge {% if message.author == request.user %}btn-success msgRight {% else %}btn-secondary msgLeft{% endif %} position-relative" data-author-id="{{ message.author.id }}" data-user-id="{{ request.user.id }}" data-message-id="{{ message.id }}">
                        {{ message.content }}
                    </button>
                </p>
            </div>
            {% endfor %}
        </div>
    </div>
    <div class="row mb-1">
        <textarea id="chat-message-input" rows="1" placeholder="Type your message..."></textarea>
    </div>
    <div class="row">
        <input class="btn btn-primary" id="chat-message-submit" type="button" value="Send">
    </div>
</div>
<script type="text/javascript">
    var roomName = {{ room_name_json|safe }};
    const currentUsername = "{{ current_user|escapejs }}";
    const currentUserId = "{{ current_user_id|escapejs }}";
</script>
{% endblock %}